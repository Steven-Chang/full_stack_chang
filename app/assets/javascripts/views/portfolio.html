<nav-bar></nav-bar>
<div id="portfolio">

<div class="content-inner">
  <div class="container-fluid">

      <div class="row">
          <div class="page-header">
            <div class="d-flex align-items-center">
              <h2 class="page-header-title">Portfolio</h2>
            </div>
          </div>
      </div>

      <div class="row" ng-show="signedIn() && user.admin">
        <div class="col-12">
          <div class="widget has-shadow">
            <div class="widget-header bordered no-actions d-flex align-items-center">
              <h4>New</h4>
            </div>

            <div class="widget-body">
              <form name="newProjectForm" 
                ng-submit="uploadFileThenCreateProject( newProjectForm )"
                class="needs-validation"
                id="add-project-form" 
                novalidate>

                <div class="form-group row align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">Title</label>
                  <div class="col-lg-9">
                    <input class="form-control" ng-model="newProjectHub.title" placeholder="Title" required>
                    <div class="invalid-feedback">
                      Please enter a title
                    </div>
                  </div>
                </div>

                <div class="form-group row align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">Description</label>
                  <div class="col-lg-9">
                    <textarea class="form-control" rows="4" ng-model="newProjectHub.description" placeholder="Description" required></textarea>
                    <div class="invalid-feedback">
                      Please enter a description
                    </div>
                  </div>
                </div>

                <div class="form-group row align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">URL</label>
                  <div class="col-lg-9">
                    <input class="form-control" ng-model="newProjectHub.url" placeholder="Link e.g. #/tetris">
                    <div class="invalid-feedback">
                      Please enter a url
                    </div>
                  </div>
                </div>

                <div class="form-group row align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">Date</label>
                  <div class="col-lg-9">
                    <input type="text" data-provide='datepicker' class="form-control" id="date-picker" ng-model="newProjectHub.dateAdded" placeholder="Date Added" required>
                    <div class="invalid-feedback">
                      Please enter a date
                    </div>
                  </div>
                </div>


                <div class="em-separator separator-dashed"></div>

                <div class="form-group row d-flex align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">Picture</label>
                  <div class="col-lg-9">
                    <input name="file" id="attachments-upload" type="file" file>
                  </div>
                </div>

                <div class="text-right">
                    <button class="btn btn-gradient-01" type="submit">Submit</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <ul class="list-grid row">
        <li class="col-12 col-md-4 col-sm-6" ng-repeat="project in projects | orderBy : 'date_added' : true">
          <div class="portfolio-project">
            <div class="project-header">
              <h4><a ng-href="{{ project.url }}">{{ project.title }}</a></h4>
              <div class="date">
                {{ project.date_added | date:'mediumDate' }}
              </div>
            </div>
            <a ng-href="{{ project.url }}">
              <div class="project-image-frame">
                <div class="project-image">
                  <img ng-src="{{ project.image_url | linkFilter }}" ng-if="project.image_url">
                  <img ng-src="{{ project.attachments[0].url }}" ng-if="project.attachments[0]">
                </div>
              </div>
            </a>
            <div class="project-description">
              {{ project.description }}
            </div>
          </div>
        </li>
      </ul>

  </div>
</div>

</div>

