<nav-bar></nav-bar>
<div id="portfolio">

<div class="content-inner">
  <div class="container-fluid">

      <div class="row">
          <div class="page-header">
            <div class="d-flex align-items-center">
              <h2 class="page-header-title">Projects</h2>
            </div>
          </div>
      </div>

      <div class="row" ng-show="signedIn() && user.admin">
        <div class="col-12">
          <div class="widget has-shadow">
            <div class="widget-header bordered no-actions d-flex align-items-center">
              <h4>New</h4>
            </div>

            <div class="widget-body">
              <form name="newProjectForm" 
                ng-submit="uploadFileThenCreateProject( newProjectForm )"
                class="needs-validation"
                id="add-project-form" 
                novalidate>

                <div class="form-group row align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">Title</label>
                  <div class="col-lg-9">
                    <input class="form-control" ng-model="newProjectHub.title" placeholder="Title" required>
                    <div class="invalid-feedback">
                      Please enter a title
                    </div>
                  </div>
                </div>

                <div class="form-group row align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">Description</label>
                  <div class="col-lg-9">
                    <textarea class="form-control" rows="4" ng-model="newProjectHub.description" placeholder="Description" required></textarea>
                    <div class="invalid-feedback">
                      Please enter a description
                    </div>
                  </div>
                </div>

                <div class="form-group row align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">URL</label>
                  <div class="col-lg-9">
                    <input class="form-control" ng-model="newProjectHub.url" placeholder="Link e.g. #/tetris">
                    <div class="invalid-feedback">
                      Please enter a url
                    </div>
                  </div>
                </div>

                <div class="form-group row align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">Start Date</label>
                  <div class="col-lg-9">
                    <input type="text" data-provide='datepicker' class="form-control" id="date-picker-start" ng-model="newProjectHub.dateAdded" placeholder="Start Date" required>
                    <div class="invalid-feedback">
                      Please enter a date
                    </div>
                  </div>
                </div>

                <div class="form-group row align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">End Date</label>
                  <div class="col-lg-9">
                    <input type="text" data-provide='datepicker' class="form-control" id="date-picker-end" ng-model="newProjectHub.endDate" placeholder="End Date">
                  </div>
                </div>


                <div class="em-separator separator-dashed"></div>

                <div class="form-group row d-flex align-items-center">
                  <label class="col-lg-3 form-control-label d-flex">Picture</label>
                  <div class="col-lg-9">
                    <input name="file" id="attachments-upload" type="file" file>
                  </div>
                </div>

                <div class="text-right">
                    <button class="btn btn-gradient-01" type="submit">Submit</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- End Page Header -->
      <div class="row justify-content-center">
          <div class="col-xl-10 col-12">
              <!-- Begin Timeline -->
              <div class="timeline timeline-line-solid">
                  <!-- Begin Timeline Item -->
                  <div class="timeline-item" ng-repeat="project in projects" infinite-scroll="getBlogPosts()">
                      <div class="timeline-point timeline-point"></div>
                      <!-- Begin Timeline Event -->
                      <div class="timeline-event">
                          <!-- Begin Widget -->
                          <div class="widget has-shadow">
                              <!-- Begin Widget Header -->
                              <div class="widget-header d-flex align-items-center">
                                  <div class="d-flex flex-column mr-auto">
                                      <div class="title">
                                          <span class="username">{{ project.title }}</span>
                                      </div>
                                  </div>
                                  <div class="widget-options" ng-show="signedIn() && user.admin">
                                      <div class="dropdown">
                                          <button type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle">
                                              <i class="la la-ellipsis-h"></i>
                                          </button>
                                          <div class="dropdown-menu">
                                              <a ui-sref="projectsedit({ id: project.id })" class="dropdown-item"> 
                                                  <i class="la la-edit"></i>Edit Project
                                              </a>
                                              <a ng-click="deleteProject( project )" class="dropdown-item"> 
                                                  <i class="la la-trash"></i>Delete Project
                                              </a>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                              <!-- End Widget Header -->
                              <!-- Begin Widget Body -->
                              <div class="widget-body">
                                <div class="portfolio-project">

                                  <a ng-href="{{ project.url }}" style="width: 100%;">
                                    <div class="project-image-frame">
                                      <div class="project-image">
                                        <img ng-src="{{ project.attachments[0].url }}" ng-if="project.attachments[0]">
                                      </div>
                                    </div>
                                  </a>
                                </div>
                                  <p>
                                    {{ project.description }}
                                  </p>
                              </div>
                              <!-- End Widget Body -->
                          </div>
                          <!-- End Widget -->
                          <div class="{{ ( $index % 2 === 1 ) ? 'time-left' : 'time-right' }}">{{ project.start_date | date:'mediumDate' }} - {{ project.end_date ? ( project.end_date | date:'mediumDate' ) : "Now" }}</div>
                      </div>
                      <!-- End Timeline Event -->
                  </div>
                  <!-- End Timeline Item -->
              </div>
              <!-- End Timeline -->
          </div>
      </div>



  </div>
</div>

</div>

