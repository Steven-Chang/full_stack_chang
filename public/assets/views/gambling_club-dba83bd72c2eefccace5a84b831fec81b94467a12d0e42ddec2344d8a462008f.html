<div ng-init="init()" id="gambling-club">
  <nav-bar></nav-bar>
  <div style="background: black; margin-top: -20px; padding: 50px 0" class="form-group">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-6">
          <h5 style="color: gray; margin-top: 5px;">Updated: {{ lastUpdatedDate | date : "EEEE, d MMMM, y" }}</h5>
          <img style="width: 100%;" ng-src="http://cdn.chatsports.com/thumbnails/1521-69984-original.jpeg">
        </div>
        <div class="col-xs-12 col-sm-6">
            <h1 style="color: white; margin-bottom: 0px;">GAMBLING CLUB</h1>
            <h5 style="color: gold">Current cash on hand: {{ summary.balance | currency }}</h5>
            <table class="table table-bordered" style="margin-top: 15px; color: white;">
            <thead>
              <tr>
                <th scope="col">Member</th>
                <th scope="col">W/L</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="user in summary.users">
                <th scope="row">{{ user.username }}</th>
                <td>{{ user.gambling_balance | currency }}</td>
              </tr>
              <tr>
                <th scope="row">Total</th>
                <td>{{ summary.net_gambling_outcome | currency }}</td>
              </tr>
            </tbody>
          </table>
          <h5 style="color: gray">* Next Deposit Date: {{ nextDepositDate | date }}</h5>
        </div>
      </div>
    </div>
  </div>
  <div ng-show="signedIn()" class="form-group">
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <h4 ng-click="slideToggleAddEntryForm(); addEntryFormVisible = !addEntryFormVisible" style="cursor: pointer">Add Entry <span class="glyphicon glyphicon-triangle-bottom" ng-hide="addEntryFormVisible"></span>
          <span class="glyphicon glyphicon-triangle-top" ng-show="addEntryFormVisible"></span></h4>
          <form ng-submit="createEntry()" id="add-entry-form">
            <div class="form-group">
              <label for="date-picker">Date</label>
              <input class="form-control" id="date-picker" type="text" 
            autocomplete="off"    
            data-provide='datepicker' ng-model="entry.date">
            </div>
            <div class="form-group">
              <label for="entry-type">Entry Type:</label>
              <select class="form-control" id="entry-type" ng-model="entry.type">
                <option value="win">Win</option>
                <option value="loss">Loss</option>
                <option value="deposit">Deposit</option>
                <option value="withdrawal">Withdrawal</option>
              </select>
            </div>
            <div class="form-group" ng-show="entry.type === 'win' || entry.type === 'loss'">
              <label for="amount">Wager</label>
              <input class="form-control" id="amount" ng-model="entry.wager">
            </div>
            <div class="form-group" ng-show="entry.type === 'win' || entry.type === 'loss'">
              <label for="odds">Odds</label>
              <input class="form-control" id="odds" placeholder="Odds" ng-model="entry.odds">
            </div>
            <div class="form-group" ng-hide="entry.type === 'loss'">
              <label for="amount" ng-show="entry.type === 'win'">Win</label>
              <label for="amount" ng-show="entry.type === 'deposit' || entry.type ==='withdrawal'">Amount</label>
              <input class="form-control" id="amount" ng-model="entry.amount">
            </div>
            <div class="form-group" ng-show="entry.type === 'win' || entry.type === 'loss'">
              <label for="description">Description</label>
              <input class="form-control" id="description" placeholder="Description" ng-model="entry.description">
            </div>
            <div class="form-group">
              <label for="member-type">Member</label>
              <select class="form-control" id="member-type" ng-model="entry.user_id">
                <option ng-repeat="user in users" ng-value="user.id">{{ user.username }}</option>
              </select>
            </div>
            <div class="form-check" ng-show="entry.type === 'win' || entry.type === 'loss'">
              <label class="form-check-label">
                <input type="checkbox" class="form-check-input" ng-model="entry.guarantee">
                Guarantee
              </label>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div>
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <h4>Entries</h4>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th scope="col">Date</th>
                <th scope="col">Description</th>
                <th scope="col">+/-</th>
                <th scope="col">Member</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="entry in entries">
                <td>{{ entry.date | date : 'dd/MMM/yy' }}</td>
                <th scope="row">{{ entry.description }}</th>
                <td>{{ entry.amount | currency }}</td>
                <td>{{ returnUsernameById( entry.user_id ) }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div ng-hide="true">
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <h2>Pick of the day stats</h2>
          <h5>Hypothesis: When we do the research and actually bets that are highly likely with great odds, we do well</h5>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th scope="col">Member</th>
                <th scope="col">+/- in decimals</th>
                <th scope="col">Number of Picks</th>
                <th scope="col">Average Odds</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">Chris</th>
                <td>+1.43</td>
                <td>2</td>
                <td>1.76</td>
              </tr>
              <tr>
                <th scope="row">Steve</th>
                <td>0</td>
                <td>2</td>
                <td>1.76</td>
              </tr>
              <tr>
                <th scope="row">Total</th>
                <td>+$45</td>
                <td>+1.43</td>
                <td>1.76</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>